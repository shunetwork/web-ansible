---
# 在 Cisco 设备上执行命令
- name: Execute Commands on Cisco Devices
  hosts: all
  gather_facts: no
  connection: network_cli
  
  tasks:
    - name: Execute show commands
      ios_command:
        commands: "{{ commands_list }}"
      register: command_output
      when: command_type == 'show'
    
    - name: Execute config commands
      ios_config:
        lines: "{{ commands_list }}"
        save_when: changed
      register: config_output
      when: command_type == 'config'
    
    - name: Display command output (show commands)
      debug:
        var: command_output.stdout_lines
      when: command_type == 'show'
    
    - name: Display config result
      debug:
        msg: "Configuration applied. Changed: {{ config_output.changed }}"
      when: command_type == 'config'

